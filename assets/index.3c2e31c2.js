var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);import{r as n,G as o}from"./vendor.518f2100.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const i=new class{constructor(){t(this,"SPEED_MULT"),t(this,"ALWAYS_SPAWN"),t(this,"MAX_RES"),t(this,"NOISE_MAGNITUDE"),t(this,"NOISE_FREQUENCY"),t(this,"BLUR_FACTOR"),this.SPEED_MULT=1,this.ALWAYS_SPAWN=!1,this.MAX_RES=1024,this.NOISE_MAGNITUDE=2,this.NOISE_FREQUENCY=.5,this.BLUR_FACTOR=1}},a=n({extensions:"OES_texture_float"}),s=new o;s.add(i,"SPEED_MULT").name("base speed").max(5).min(.25).step(.05),s.add(i,"NOISE_MAGNITUDE").name("noise mag").max(10).min(0).step(.01),s.add(i,"NOISE_FREQUENCY").name("noise frequency").max(1).min(0).step(.01),s.add(i,"MAX_RES").name("max res").max(4096).min(256).step(256),s.add(i,"ALWAYS_SPAWN").name("always spawn"),s.add(i,"BLUR_FACTOR").name("blur factor").max(1).min(0).step(.01);const r={x:0,y:0,buttons:0},g=a._gl.canvas;g.addEventListener("mousemove",(e=>{r.x=e.clientX,r.y=e.clientY,r.buttons=e.buttons})),g.addEventListener("mousedown",(e=>{r.x=e.clientX,r.y=e.clientY,r.buttons=e.buttons})),g.addEventListener("mouseup",(e=>{r.x=e.clientX,r.y=e.clientY,r.buttons=e.buttons})),g.addEventListener("touchmove",(e=>{r.x=e.changedTouches[0].clientX,r.y=e.changedTouches[0].clientY,r.buttons=e.touches.length})),g.addEventListener("touchstart",(e=>{r.x=e.changedTouches[0].clientX,r.y=e.changedTouches[0].clientY,r.buttons=e.touches.length})),g.addEventListener("touchend",(e=>{r.x=e.changedTouches[0].clientX,r.y=e.changedTouches[0].clientY,r.buttons=e.touches.length}));const l=64;let c=64,I=64;const C=Array(16384).fill(0).map((()=>Math.random()>.9?255:0)),d=Array(3).fill().map((()=>a.texture({width:64,height:64,data:C,wrap:"repeat"}))),u=d.map((e=>a.framebuffer({color:e,depthStencil:!1}))),A=a({frag:"\n    precision mediump float;\n    uniform sampler2D prevState;\n\n    uniform float sshapeX, sshapeY;\n    uniform float blurFac;\n    varying vec2 uv;\n    void main() {\n      vec3 n = vec3(0.0);\n      for(int dx=-1; dx<=1; ++dx)\n      for(int dy=-1; dy<=1; ++dy) {\n        n += texture2D(prevState, uv+vec2(dx,dy)/vec2(sshapeX,sshapeY)).rgb;\n      }\n      vec3 s = texture2D(prevState, uv).rgb;\n      float l=blurFac;\n      vec3 ns=s*(1.0-l)+l*((n)/9.0);\n      vec3 col=vec3(max(ns-1.0/255.0,0.0));\n      gl_FragColor = vec4(col,1);\n    }",framebuffer:({tick:e},{outI:t})=>u[t],uniforms:{blurFac:()=>i.BLUR_FACTOR}}),p=a({frag:"\n    precision mediump float;\n    uniform sampler2D prevState;\n    varying vec2 uv;\n    void main() {\n        vec3 state = texture2D(prevState, uv).rgb;\n      gl_FragColor = vec4(vec3(state), 1);\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 uv;\n    void main() {\n      uv = 0.5 * (position + 1.0);\n      gl_Position = vec4(position, 0, 1);\n    }",attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:({tick:e},{inI:t})=>u[t],sshapeX:()=>I,sshapeY:()=>c},depth:{enable:!1},count:3}),h=a({frag:"\n    precision mediump float;\n    uniform sampler2D prevState;\n    varying vec2 uv;\n    void main() {\n      vec3 state = texture2D(prevState, uv).rgb;\n      gl_FragColor = vec4(vec3(state), 1);\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 uv;\n    void main() {\n      uv = 0.5 * (position + 1.0);\n      gl_Position = vec4(position, 0, 1);\n    }",attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:({tick:e},{inI:t})=>u[t]},depth:{enable:!1},framebuffer:({tick:e},{outI:t})=>u[t],count:3}),m=Array(2).fill().map((()=>a.framebuffer({radius:l,colorType:"float",depthStencil:!1}))),v=a({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main () {\n      gl_Position = vec4(position, 0, 1);\n    }\n    ",frag:"\n    precision highp float;\n    uniform sampler2D state;\n    uniform sampler2D substrate;\n    uniform float shapeX, shapeY, deltaT, gravity;\n\n    uniform float sshapeX, sshapeY;\n    uniform float speedMult;\n    uniform float noiseSize;\n    uniform float noiseF;\n    float PHI = 1.61803398874989484820459 * 00000.1; // Golden Ratio   \nfloat PI  = 3.14159265358979323846264 * 00000.1; // PI\nfloat SRT = 1.41421356237309504880169 * 10000.0; // Square Root of Two\n\n\nfloat random_0t1(in vec2 coordinate, in float seed)\n{\n    return fract(sin(dot(coordinate*seed, vec2(PHI, PI)))*SRT);\n}\nfloat briC(in vec3 color)\n{\n    return color.x+color.y+color.z;\n}\n    void main () {\n      vec2 res=vec2(sshapeX,sshapeY);\n      vec2 shape = vec2(shapeX, shapeY);\n      vec4 prevState = texture2D(state,\n        gl_FragCoord.xy / shape);\n      vec2 position = (prevState.xy/2.0+0.5)*res;\n      vec2 velocity = prevState.zw;\n      position += 0.5 * velocity * deltaT;\n      if (position.x < 0.0 || position.x > res.x) {\n        velocity.x =-abs(velocity.x)*sign(position.x-res.x/2.0);\n       //position.x =mod(mod(position.x*0.5+0.5,1.0)+1.0,1.0)*2.0-1.0;\n      }\n      if (position.y < 0.0 || position.y > res.y) {\n       velocity.y =-abs(velocity.y)*sign(position.y-res.y/2.0);\n       // position.y =mod(mod(position.y*0.5+0.5,1.0)+1.0,1.0)*2.0-1.0;\n      }\n      vec2 dm=vec2(0.0);\n      float brim=-1.0;\n      float cc=(briC(texture2D(substrate, position/res).rgb));\n      for(int da=-1; da<=1; ++da){\n          float aa=float(da)/6.0*3.1415926535*2.0+atan(velocity.y,velocity.x);\n          vec2 dp=vec2(cos(aa),sin(aa));\n        if(dot(dp,velocity)>=0.0*length(velocity)){\n        float bri=(briC(texture2D(substrate, position/res+(dp*(10.0 )+vec2(0.0,0.0))/res).rgb))+1.0;\n        float rd=mod(mod(random_0t1(position,float(da+20)),1.0)+1.0,1.0);\n        float no=mod(mod(random_0t1(position.yx,float(da+30)),1.0)+1.0,1.0);;\n        if(rd<noiseF)\n        bri*=1.0+no*noiseSize;\n        if(bri>brim){\n        dm=dp;//*bri;//(dp-normalize(velocity))*bri;\n        brim=bri;\n        }\n        }\n    }\n      \n     //velocity.xy=length(velocity)>0.0?normalize(velocity):vec2(0.0);\n     float ddg=length(dm);\n      //velocity.xy+=(dm-normalize(velocity)*dot(normalize(velocity),dm))*(brim)/(cc+brim)*speedMult;//*max(1.0,brim)*0.1;//normalize(dm)*max(ddg,1.0/max(sshapeX,sshapeY))/10.0;\n      float anO=0.05;//+(position.y*0.5+0.5)*0.5;\n      velocity.xy+=anO*normalize(dm)*((brim)/(cc+brim)*2.0+1.0)/2.0*speedMult;//*max(1.0,brim)*0.1;//normalize(dm)*max(ddg,1.0/max(sshapeX,sshapeY))/10.0;\n      velocity.xy*=1.0/(1.0+anO);\n      float an=0.005;//+(position.y*0.5+0.5)*0.5;\n     velocity.xy+=an*(length(velocity)>0.0?normalize(velocity)*speedMult:vec2(0.0));\n     velocity.xy*=1.0/(1.0+an);\n      position += 0.5 * velocity * deltaT;\n     //velocity.y = velocity.y + gravity * deltaT;\n      gl_FragColor = vec4(position.xy/res.xy*2.0-1.0, velocity);\n    }\n    ",depth:{enable:!1},framebuffer:({tick:e},{t:t})=>m[(t+1)%2],uniforms:{state:({tick:e},{t:t})=>m[t%2],substrate:({tick:e})=>u[0],shapeX:a.context("viewportWidth"),shapeY:a.context("viewportHeight"),sshapeX:()=>I,sshapeY:()=>c,speedMult:()=>i.SPEED_MULT,noiseSize:()=>i.NOISE_MAGNITUDE,noiseF:()=>i.NOISE_FREQUENCY,deltaT:1,gravity:0},attributes:{position:[0,-4,4,4,-4,4]},primitive:"triangles",elements:null,offset:0,count:3}),y=a({vert:"\n    precision highp float;\n    attribute vec2 sprite;\n    uniform sampler2D state;\n    uniform float N;\n    varying vec3 rg;\n    uniform float sshapeX, sshapeY;\n    float briC(in vec3 color)\n{\n    return color.x+color.y+color.z;\n}\n    void main () {\n        vec4 sss=texture2D(state, sprite);\n        vec4 sss2=texture2D(state, sprite+vec2(0.0,1.0/N).yx);\n\n        vec4 sss3=texture2D(state, sprite-vec2(0.0,1.0/N).yx);\n      vec2 position =sss.xy;\n      gl_PointSize = 1.0;\n      float gg=((length(sss.zw)-min(length(sss2.zw),min(length(sss.zw),length(sss3.zw))))/\n      max(abs(length(sss3.zw)-length(sss2.zw)),max(abs(length(sss3.zw)-length(sss.zw)),abs(length(sss.zw)-length(sss2.zw))))\n      );\n     float ggy=gg;\n      float a=length(sss.zw)*3.1415926535*2.0;//(ggy-0.5)*10000000.0+0.50+sin(atan(sss.w,sss.z)*2.0)*0.0;//0.5+log(ggy/(1.0-ggy))*0.1;//(length(sss.zw)*max(sshapeX,sshapeY)/20.0)*2.0+sin(atan(sss.w,sss.z)*2.0)*0.0;\n      rg = normalize(vec3(sin(a),sin(a+3.1415926535*2.0/3.0),sin(a+3.1415926535*4.0/3.0))/2.0+0.5);\n      rg=rg/briC(rg);\n      gl_Position = vec4(position, 0, 1);\n    }\n    ",frag:"\n    precision highp float;\n    varying vec3 rg;\n    void main () {\n      gl_FragColor = vec4(rg, 1.0);\n    }\n    ",attributes:{sprite:Array(l*l).fill().map((function(e,t){return[t%l/l,(t/l|0)/l]})).reverse()},uniforms:{state:({tick:e},{t:t})=>m[t%2],N:({tick:e},{t:t})=>l,substrate:({tick:e},{inI:t})=>u[t],sshapeX:()=>I,sshapeY:()=>c},primitive:"points",blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one",dstAlpha:"one minus src alpha"}},offset:(e,{count:t})=>l*l-t,elements:null,count:a.prop("count"),framebuffer:({tick:e},{outI:t})=>u[t]});let b=0;const f={data:new Float32Array(256),width:64,height:1},w=document.createElement("div");function M(e,t,n){return Math.min(Math.max(2*n*e/t-1,-.999),.999)}Object.assign(w.style,{color:"white",position:"absolute",left:"20px",top:"20px","z-index":20}),document.body.appendChild(w);let x=[],G=[],L=[],S=[],T=0;(async()=>{const e=new AudioContext;await e.audioWorklet.addModule("data:application/javascript;base64,ZXhwb3J0IGNsYXNzIFdoaXRlTm9pc2VQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogICAgdCA9IDA7CiAgICBmID0gW1swLCAwLDBdXTsKICAgIGYwID0gW1swLCAwLDBdXTsKICAgIGcgPSBbWzEsIDEsIDFdXTsKICAgIGdPID0gW1sxLCAxLCAxXV07CiAgICBkID0gMDsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpCiAgICAgIHRoaXMucG9ydC5vbm1lc3NhZ2UgPSAobSkgPT4gewogICAgICAgIGlmIChtLmRhdGEucC5sZW5ndGggPiAxKSB7CiAgICAgICAgICB0aGlzLmYwID0gdGhpcy5mLnNsaWNlKCk7CiAgICAgICAgICB0aGlzLmYgPSBtLmRhdGEucDsKICAgICAgICAgIHRoaXMuZCA9IG0uZGF0YS5kOwogIAogICAgICAgICAgLy8gbGV0IGdzPXRoaXMuZi5tYXAoKHgsaSk9PnsKICAgICAgICAgIC8vICAgICBjb25zdCBvbGQ9dGhpcy5mMFtpXT8/eDsKICAgICAgICAgIC8vICAgICBjb25zdCBkb3Q9eDsKICAgICAgICAgIC8vICAgICBjb25zdCBsZW49TWF0aC5wb3coZG90WzBdKioyK2RvdFsxXSoqMiwwLjUpOwogICAgICAgICAgLy8gICAgIGNvbnN0IGxlbk89TWF0aC5wb3cob2xkWzBdKioyK29sZFsxXSoqMiwwLjUpOwogICAgICAgICAgLy8gICAgIGNvbnN0IGE9TWF0aC5hY29zKChkb3RbMV0qb2xkWzFdK2RvdFswXSpvbGRbMF0pL2xlbi9sZW5PKTsKICAgICAgICAgIC8vICAgICAvLyBsZXQgZGlzPU1hdGgucG93KDIsKGxlbioxKS8xMik7CiAgICAgICAgICAvLyAgICAgY29uc3QgZnJlcT1hL01hdGguUEkvMi8odGhpcy5kLzEwMDApOwogICAgICAgICAgLy8gICAgIC8vIGNvbnN0IGw9TWF0aC5tYXgoMCxNYXRoLm1pbigxLGZyZXEpKQogICAgICAgICAgLy8gICAgIC8vIGxldCBmZj1sKig0MTg2LTEzMCkrMTMwOwogICAgICAgICAgLy8gICAgIHJldHVybiBbTWF0aC5sb2coZnJlcSswLjAwMDAwMDEpLE1hdGgubWF4KDAsZG90WzBdKSowKzFdCiAgICAgICAgICAvLyAgICAgLy8gW01hdGgucG93KDIsTWF0aC5mbG9vcihNYXRoLmxvZyhNYXRoLnBvdyhhL01hdGguUEkvMi8odGhpcy5kLzEwMDApLDEpKS9NYXRoLmxvZygyKSo2KzMyKS8xMiksMC41XTsvLz4wP2RpczowOwogICAgICAgICAgLy8gfSkKICAKICAgICAgICAgIC8vIGxldCBteD1ncy5tYXAoeD0+eFswXSkucmVkdWNlKChhLGIpPT5NYXRoLm1heChhLGIpLDApOwogICAgICAgICAgLy8gbGV0IG1lbj1ncy5tYXAoeD0+eFswXSkucmVkdWNlKChhLGIpPT5iK2EsMCkvZ3MubGVuZ3RoOwogICAgICAgICAgLy8gZ3Muc29ydCgoYSxiKT0+YVswXS1iWzBdKTsKICAgICAgICAgIC8vIGNvbnN0IGw9TWF0aC5taW4oZ3MubGVuZ3RoLDMyKTsKICAKICAgICAgICAgIHRoaXMuZyA9IG0uZGF0YS5wLm1hcCgoeCwgaSkgPT4gewogICAgICAgICAgICBjb25zdCBvID0geFswXQogICAgICAgICAgICByZXR1cm4gW01hdGgucG93KDIsIChNYXRoLmxvZzIoeFsxXSkgKiAxMikgLyAxMiksIHhbMl0sIG9bMl0ucGhhc2VdCiAgICAgICAgICB9KTsKICAKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF0KICAgICAgb3V0cHV0LmZvckVhY2goY2hhbm5lbCA9PiB7CiAgICAgICAgY29uc3Qgc24gPSAoeCkgPT4gTWF0aC5zaW4oeCkvL01hdGgucG93KE1hdGguYWJzKHglMS0wLjUpLDEpLy9NYXRoLnNpbih4KQogICAgICAgIGNvbnN0IHRvbmUgPSAocGFyYW1zLCB0KSA9PiB7CiAgICAgICAgICAvLyBjb25zdCB0ZD1NYXRoLm1pbihNYXRoLnBvdygyLE1hdGgucm91bmQoTWF0aC5sb2cyKHBhcmFtc1syXSkqMSkvMSkvMTAsOCk7CiAgICAgICAgICByZXR1cm4gc24oTWF0aC5QSSAqIDIgKiBwYXJhbXNbMF0gKiB0K01hdGguUEkgKiAyICpwYXJhbXNbMl0pKnBhcmFtc1sxXTsvLyoodGQ8MTAwMDA/MTowKSooMC43NSsoTWF0aC5zaW4odCpNYXRoLlBJKjIvdGQpKS80KQogICAgICAgIH0KICAgICAgICBjb25zdCBkZCA9IE1hdGgucG93KHRoaXMuZy5sZW5ndGgsIDEpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbm5lbC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy50ICs9IDEgLyA0NDEwMDsKICAgICAgICAgIGxldCB0b3QgPSAwOwogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmcubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKGogPCB0aGlzLmcubGVuZ3RoKSB7CiAgICAgICAgICAgICAgY29uc3QgbCA9IGkgLyBjaGFubmVsLmxlbmd0aDsKICAgICAgICAgICAgICB0b3QgKz0gKGwgKiB0b25lKHRoaXMuZ1tqXSwgdGhpcy50KSArICgxIC0gbCkgKiB0b25lKHRoaXMuZ09bal0gPz8gdGhpcy5nW2pdLCB0aGlzLnQpKTsvLyAvIGRkOwogIAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjaGFubmVsW2ldID0gdG90OwogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5nTyA9IHRoaXMuZy5zbGljZSgpCiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgfQogIHJlZ2lzdGVyUHJvY2Vzc29yKCJ3aGl0ZS1ub2lzZS1wcm9jZXNzb3IiLCBXaGl0ZU5vaXNlUHJvY2Vzc29yKTsK");const t=new AudioWorkletNode(e,"white-noise-processor");var n=e,o=n.createAnalyser();o.minDecibels=-90,o.maxDecibels=-10,o.smoothingTimeConstant=.85;var s=n.createWaveShaper(),g=n.createGain(),C=n.createBiquadFilter(),X=n.createConvolver();let K=new XMLHttpRequest;K.open("GET","./assets/pluck.ae56ffc0.ogg",!0),K.responseType="arraybuffer",K.onload=function(){var e=K.response;n.decodeAudioData(e,(function(e){n.createBufferSource(),X.buffer=e}),(function(e){console.log("Error with decoding audio data"+e.err)}))},K.send(),t.connect(o),o.connect(s),s.connect(C),C.connect(X),X.connect(g),g.connect(n.destination);const B=[0,2,3,5,7,8,10];C.type="lowshelf",t.port.start(),(new Date).getTime(),a.frame((({tick:e,drawingBufferWidth:t,drawingBufferHeight:n,pixelRatio:o})=>{const s=M(r.x,t,o),g=-M(r.y,n,o);let C=Math.max(window.innerWidth*o,window.innerHeight*o),X=Math.ceil(window.innerWidth*o*Math.min(1,i.MAX_RES/C)),K=Math.ceil(window.innerHeight*o*Math.min(1,i.MAX_RES/C));if(X===I&&K===c||(d.forEach(((e,t)=>u[t]({color:e({width:X,height:K})}))),I=X,c=K),r.buttons||i.ALWAYS_SPAWN||T<100){for(let e=0;e<64;++e)f.data[4*e]=s,f.data[4*e+1]=g,f.data[4*e+2]=.25*(Math.random()-.5),f.data[4*e+3]=.25*(Math.random()-.5);m[e%2].color[0].subimage(f,b%l,(b/l|0)%l),b+=64,w.innerText=`${Math.min(b,l*l)}`}for(let i=0;i<2;i++)v({t:T}),a.clear({color:[0,0,0,1],depth:1}),p({inI:0},(()=>{a.draw(),A({outI:1})})),p({inI:1},(()=>{a.draw(),A({outI:0})})),h({inI:1,outI:0},(()=>{a.draw(),y({t:T,outI:0,inI:1,count:Math.min(b,l*l)})})),T+=1,T%2==0&&a({framebuffer:m[0]})((()=>{const e=[...a.read().values()],t=new Array(e.length/4).fill(0).map(((e,t)=>t)).filter((t=>Number.isFinite(e[4*t]))).map((t=>[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]));if(G=x.slice(),x=t,x.length>1&&G.length>1){(new Date).getTime();let e=x.map(((e,t)=>{var n,o,i,a;const s=null!=(n=G[t])?n:e,r=null!=(o=null==L?void 0:L[t])?o:[[1,[0]],s,{lastTurnTime:T,plastTurnTime:T,lastTurn:[1,0],turnCycle:0,turnDur:[],phase:0,turnMarks:[]}],g=r[2],l=e,C=Math.pow(l[3]**2+l[2]**2,.5),d=[s[2]-l[2],s[3]-l[3]],u=Math.atan2(l[3],l[2]),A=C*C/(Math.hypot(...d)/4),p=Math.pow(s[3]**2+s[2]**2,.5),h=Math.abs(Math.acos((l[3]*s[3]+l[2]*s[2])/C/p))*Math.sign(l[2]*s[3]-l[3]*s[2]),m=Math.pow(((s[0]-l[0])*I)**2+((s[1]-l[1])*c)**2,.5);let v=null!=(i=r[0][1][0])?i:0;Number.isFinite(v)||(v=0);let y=m/Math.sqrt(1-Math.pow((l[3]*s[3]+l[2]*s[2])/C/p,2));Math.sign(l[2]*s[3]-l[3]*s[2]);const b=g.lastTurn[0]*l[2]+g.lastTurn[1]*l[3];let f=g.lastTurnTime,w=g.plastTurnTime,M=g.lastTurn,x=.5*g.turnCycle+.5*h,S=g.turnMarks;if(b<0){x%=2*Math.PI*.25;M=g.lastTurn[1]*l[2]-g.lastTurn[0]*l[3]>=0?[g.lastTurn[1],-g.lastTurn[0]]:[-g.lastTurn[1],g.lastTurn[0]],w=f+0,f=T+0}S.push(y/C),S=S.slice(-15),S.reduce(((e,t)=>e+t),0),S.length;let X=g.turnDur;X.push(Math.abs(1/y)),X=X.slice(-5),Math.pow(2,Math.log2(1/(X.reduce(((e,t)=>e+t),0)/X.length))/2);return[[1,[null!=(a=Math.max(Math.min(2*A*1+0*v,1760),-3520))?a:1]],l,{lastTurnTime:f,plastTurnTime:w,lastTurn:M,turnCycle:x,turnDur:X,phase:u/Math.PI/2*0,turnMarks:S}]}));L=e,e.sort(((e,t)=>e[0][1][0]-t[0][1][0]));const t=Math.min(e.length,24),n=e=>{const t=Math.log2(e/440),n=Math.floor(t),o=B[Math.floor((t-n)*B.length)]/12+n;return 440*Math.pow(2,Math.floor(12*o)/12)},o=e.findIndex(((n,o)=>n[0][1][0]>0&&o>=e.length/t));S=new Array(t).fill(0).map(((i,a)=>{const s=e[Math.floor((a+.5)*((e.length-1)/t))],r=e[o][0][1][0],g=e[Math.floor(1*(e.length-1))][0][1][0];return T%8==0&&T%(8*Math.pow(4,a%2))==0?[s,[n(220*Math.exp(Math.max(4*-Math.log(2),Math.log(s[0][1][0]/r)/Math.log(g/r)*Math.log(2)*3)))],1/24]:S[a]}))}}))})),window.setInterval((()=>{t.port.postMessage({p:S,d:1,t:T}),window.mm=S.map((e=>e[1]))}),1e3/44100*128*2)})();
